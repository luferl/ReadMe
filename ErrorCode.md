# 系统错误代码定义
本文档用于定义系统的常见错误与错误代码

> 目录


* 系统常见错误
    * [HTTP状态码](#http状态码)
    * [系统异常](#系统异常)
    * [参数校验异常](#参数校验异常)
    * [返回码定义](#返回码定义)
    * [自定义异常](#自定义异常)
    
    
## HTTP状态码

|代码|异常说明|
|----|-----|
|100|继续发送请求|
|101|转换其他协议|
|200|成功|
|202|处理尚未完成|
|203|信息未授权|
|204|没有新内容|
|205|没有新内容，但浏览器应强制刷新|
|300|文档可以在多个位置找到|
|301|文档在其他地方|
|302|文档临时存储在其他地方|
|304|客户端有缓存的文档|
|400|语法错误|
|401|未授权|
|403|拒绝访问|
|404|找不到|
|405|请求的方式不正确|
|406|资源的MIME类型与客户端的Accept头所指定的格式不兼容|
|408|在连接允许时间内客户端没有发送请求|
|409|请求和资源的当前状态冲突|
|410|文档已不可用|
|500|服务器内部错误|
|502|服务器作为网关或代理对下一个服务器进行访问，但是返回了非法应答|
|503|服务不可用|
|504|服务器作为网关或代理对下一个服务器进行访问，但是访问超时|

## 系统异常
以Java为例，常见异常类型

|异常类型|异常说明|
|----|-----|
|ArithmeticExecption|算数异常|
|NullPointerException|空指针异常类|
|ClassCastException|类型强制转换异常|
|NegativeArrayException|数组负下标异常|
|ArrayIndexOutOfBoundsException|数组下标越界异常|
|SecturityException|违背安全原则异常|
|EOFException|文件已结束异常|
|FileNotFoundException|文件未找到异常|
|NumberFormatException|字符串转换为数字异常|
|SQLException|操作数据库异常|
|IOException|输入输出异常|
|NoSuchMethodException|方法未找到异常|

## 系统异常
定义常见的参数异常种类

参数为空

参数长度过短

参数长度过长

参数格式不合法（例如Email）

参数复杂度不合法（例如需包含大写字母与小写字母）

参数状态不合法（例如时间超范围）

参数大小不合法（例如小于或大于要求的范围）

参数类型不合法（例如请求的文件种类）

## 返回码定义

建议分类（返回码第一位）如下

|返回码头部|说明|
|----|----|
|-1|系统繁忙|
|0|请求成功|
|1|HTTP请求错误|
|2|参数校验错误|
|3|系统内部错误|
|4|业务相关逻辑错误|


以腾讯微信公众平台的全局返回码为例（节选），其状态码大概是按业务进行分类，分为4,6,9等开头

|返回码|说明|
|----|----|
|-1|系统繁忙，此时请开发者稍候再试|
|0|请求成功|
|40001|获取 access_token 时 AppSecret 错误，或者 access_token 无效|
|40002|不合法的凭证类型|
|40003|不合法的OpenID|
|40004|不合法的媒体文件类型|
|40005|不合法的文件类型|
|40006|不合法的文件大小|
|40007|不合法的媒体文件 id|
|40008|不合法的消息类型|
|40009|不合法的图片文件大小|
|40010|不合法的语音文件大小|
|40011|不合法的视频文件大小|
|40012|不合法的缩略图文件大小|
|40013|不合法的 AppID|
|40014|不合法的 access_token|
|40019|不合法的按钮 KEY 长度|
|40020|不合法的按钮 URL 长度|
|40022|不合法的子菜单级数|
|40035|不合法的参数|
|40038|不合法的请求格式|
|40039|不合法的 URL 长度|
|40050|不合法的分组 id|
|40051|分组名字不合法|
|41001|缺少 access_token 参数|
|41007|缺少子菜单数据|
|41008|缺少 oauth code|
|43001|需要 GET 请求|
|44001|多媒体文件为空|
|45001|多媒体文件大小超过限制|
|45002|消息内容超过限制|
|45009|接口调用超过限制|
|45011|API 调用太频繁，请稍候再试|
|65312|不合法的国家信息|
|9001007|上传文件缺失|
|9001034|设备备注信息过长|
|9001035|设备申请参数不合法|

## 自定义异常
主要为业务类逻辑异常

不是很好定义

建议先以一个特定场景为例开发Demo


## 参考资料

[微信公众平台-全局返回码说明](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1433747234)